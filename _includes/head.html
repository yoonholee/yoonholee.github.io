<!-- Metadata, OpenGraph and Schema.org -->
{% include metadata.html %}

<!-- Content Security Policy -->
<meta
  http-equiv="Content-Security-Policy"
  content="
  default-src 'self';
  script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://www.googletagmanager.com https://www.google-analytics.com;
  style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
  font-src 'self' https://cdn.jsdelivr.net;
  img-src 'self' data: https: http:;
  connect-src 'self' https://www.google-analytics.com;
  frame-ancestors 'none';
  base-uri 'self';
  form-action 'self';
"
/>

<!-- Performance optimizations -->
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

<!-- Preload self-hosted fonts for instant rendering -->
<link rel="preload" href="{{ '/assets/fonts/SourceSerif4-Regular-subset.woff2' | relative_url }}" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="{{ '/assets/fonts/SourceSerif4-Semibold-subset.woff2' | relative_url }}" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="{{ '/assets/fonts/SourceSans3-Variable-subset.woff2' | relative_url }}" as="font" type="font/woff2" crossorigin>

<!-- Bootstrap - Preload for faster loading -->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@{{ site.bootstrap.version }}/dist/css/bootstrap.min.css"
    as="style" integrity="{{ site.bootstrap.integrity.css }}" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@{{ site.bootstrap.version }}/dist/css/bootstrap.min.css"
    rel="stylesheet" integrity="{{ site.bootstrap.integrity.css }}" crossorigin="anonymous">

<!-- Fonts & Icons - Defer non-critical CSS -->
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@{{ site.fontawesome.version }}/css/all.min.css"
    integrity="{{ site.fontawesome.integrity }}" crossorigin="anonymous"
    media="print" onload="this.media='all'; this.onload=null;">
<noscript><link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@{{ site.fontawesome.version }}/css/all.min.css"
    integrity="{{ site.fontawesome.integrity }}" crossorigin="anonymous"></noscript>
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/academicons@{{ site.academicons.version }}/css/academicons.min.css"
    crossorigin="anonymous"
    media="print" onload="this.media='all'; this.onload=null;">
<noscript><link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/academicons@{{ site.academicons.version }}/css/academicons.min.css"
    crossorigin="anonymous"></noscript>

<!-- Code Syntax Highlighting -->
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/{{ site.highlight_theme_light | append: '.css' }}"
    integrity="sha384-/tujfASjttzsRPkdiVuub0ckTchk70kHbdT1/G7C/9xA2mBu/45Kxae2kSeXMPqZ"
    crossorigin="anonymous"
    media="" id="highlight_theme_light" />

<!-- Styles -->
{% if site.icon.size < 3 %} <link rel="shortcut icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>{{ site.icon }}</text></svg>">
    {% elsif site.icon != blank %}
    <link rel="shortcut icon" href="{{ site.icon | prepend: '/assets/img/' | relative_url}}" />
    {% endif %}
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
    <link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">

    <!-- Dark Mode -->
    {% if site.enable_darkmode %}
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/{{ site.highlight_theme_dark | append: '.css' }}"
        integrity="sha384-zkiblDYWgSXfpl/lQE2riHkUA0VbZnY3GGeRWgCiZi2rS5n23fq9MD6vS9ewzl7N"
        crossorigin="anonymous"
        media="none" id="highlight_theme_dark" />

    <script src="{{ '/assets/js/theme.js' | relative_url }}"></script>
    <script src="{{ '/assets/js/dark_mode.js' | relative_url }}"></script>
    {% endif %}
