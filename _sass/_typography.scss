/*******************************************************************************
 * Typography - Base text styles, headings, links
 ******************************************************************************/

@use "variables" as *;

// Base typography
html, body {
  font-family: "Source Sans 3", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  font-size: 1.0625rem;
  line-height: 1.5;
  font-weight: 400;
  height: 100%;
  color: var(--global-text-color);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizelegibility;
  word-break: break-word;
  text-justify: inter-word;
  hyphens: auto;
  text-underline-position: under;
  text-underline-offset: 0.18em;
  text-size-adjust: 100%;
  font-feature-settings: "kern" 1, "onum" 1, "pnum" 1;
  font-kerning: normal;
  font-variant-ligatures: common-ligatures;
  font-variant-numeric: oldstyle-nums proportional-nums;
  scroll-behavior: smooth;
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-serif);
  font-weight: 600;
  line-height: 1.25;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
  font-feature-settings: "kern" 1;
  font-variant-numeric: lining-nums;
}

// Modular scale (1.25 Major Third): base 17px → 21 → 27 → 33
h1 { font-size: var(--type-size-xl); }   // 33px
h2 { font-size: var(--type-size-lg); margin-bottom: 0.75em; }  // 27px
h3 { font-size: var(--type-size-md); }   // 21px

b, strong {
  font-weight: 600;
}

em, i {
  padding-right: 0.08em;
}

hr {
  border-top: 1px solid var(--global-text-color);
}

// Tables
table {
  margin-bottom: 1.5rem;
  border-collapse: collapse;
}

table td, table th {
  font-size: 1rem;
  font-variant-numeric: lining-nums tabular-nums;
  padding: 0.5rem 1rem;
}

table th {
  font-weight: 600;
  border-bottom: 2px solid var(--global-divider-color);
}

// Common link styles
span a, p a, li a {
  color: var(--global-theme-color);
  text-decoration: none;

  &:hover {
    color: var(--global-hover-color);
    text-decoration: underline;
    text-decoration-thickness: 0.06em;
    text-underline-offset: 0.05em;
    font-weight: 600;
  }
}

// Figures and images
figure, img {
  max-width: 90vw;
}

// Blockquotes
blockquote {
  background: var(--global-bg-color);
  border-left: 2px solid var(--global-theme-color);
  margin: 1.5em 0;
  padding: 0.5em var(--space-tau);
  font-size: var(--type-size-base);
  hanging-punctuation: first;
}

// Math & Captions
.equation {
  margin-bottom: var(--space-tau);
  text-align: center;
}

.caption {
  font-size: 0.875rem;
  margin: var(--space-tau) 0 var(--space-2tau);
  text-align: center;
}

// Code
figure.highlight {
  margin: 0 0 1rem;
}

pre {
  color: var(--global-theme-color);
  background-color: var(--global-code-bg-color);
  padding: var(--space-sigma) var(--space-tau);
  font-variant-numeric: lining-nums tabular-nums;
  white-space: pre-wrap;
  word-wrap: break-word;

  pre,
  code {
    background-color: transparent;
    padding: 0;
  }
}

code {
  color: var(--global-theme-color);
  background-color: var(--global-code-bg-color);
  padding: var(--space-mu);
  font-variant-numeric: lining-nums tabular-nums;
}
