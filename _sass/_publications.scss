/*******************************************************************************
 * Publications - Papers page styles
 ******************************************************************************/

@use "variables" as *;

// Selected papers (homepage)
.selected-papers {
  margin-top: 0;

  h3 {
    margin-bottom: var(--space-2tau);
  }

  .paper {
    position: relative;
    display: grid;
    grid-template-columns: 60px 1fr;
    gap: var(--space-tau);
    margin-bottom: var(--space-sigma);
    padding: var(--space-tau);
    margin-left: calc(-1 * var(--space-tau));
    margin-right: calc(-1 * var(--space-tau));
    align-items: start;
    border: 1px solid transparent;
    cursor: pointer;

    &:hover {
      background-color: rgb(0 0 0 / 2%);
      border-color: var(--global-divider-color);

      .paper-year {
        font-weight: 500;
      }

      .paper-content a {
        font-weight: 600;
      }

      .my-badge {
        background-color: var(--global-theme-color);
        color: white;
        border-color: var(--global-theme-color);
      }
    }

    .paper-year {
      font-size: 0.875rem;
      font-weight: 400;
      color: var(--global-text-color-lighter);
      font-variant-numeric: lining-nums tabular-nums;
    }

    .paper-content {
      a[main-paper-link] {
        color: var(--global-theme-color);
        font-size: 1.0625rem;
        font-weight: 500;
        text-decoration: none;

        &::after {
          content: '';
          position: absolute;
          inset: 0;
        }

        &:hover {
          color: var(--global-hover-color);
          font-weight: 600;
        }
      }

      .authors {
        font-size: 0.95rem;
        color: var(--global-text-color-light);
        margin: var(--space-mu) 0;
      }

      .venue {
        font-size: 0.875rem;
        color: var(--global-text-color-lighter);
        font-style: italic;
        margin: 0;
      }

      .paper-tooltip {
        margin-top: var(--space-sigma);
        padding-top: var(--space-sigma);
        border-top: 1px solid var(--global-divider-color);
        font-size: 0.9rem;
        color: var(--global-text-color-light);
        line-height: 1.5;
        font-style: italic;
      }
    }
  }
}

// Publications page
.publications {
  margin-top: var(--space-tau);

  .year {
    font-family: var(--font-serif);
    font-size: 2rem;
    color: var(--global-text-color-lighter);
    margin-top: var(--space-tau);
    margin-bottom: 0;
    text-align: center;
  }

  .bibliography {
    list-style: none;
    padding: 0;
    margin-top: 0;

    .publication-row {
      position: relative;
      margin-bottom: var(--space-mu);
      padding: var(--space-sigma);
      margin-left: calc(-1 * var(--space-sigma));
      margin-right: calc(-1 * var(--space-sigma));
      border: 1px solid transparent;
      cursor: pointer;

      &:hover {
        background-color: rgb(0 0 0 / 2%);
        border-color: var(--global-divider-color);

        .title {
          font-weight: 600;
        }

        .links a {
          color: var(--global-theme-color);
        }
      }
    }

    li {
      font-size: var(--type-size-caption);

      // Hide badge column, make content full-width
      .abbr {
        display: none;
      }

      .col-sm-10 {
        flex: 0 0 100%;
        max-width: 100%;
      }

      span {
        display: block;
      }

      .title {
        font-size: var(--type-size-base);
        font-weight: 500;
        color: var(--global-theme-color);

        b {
          font-weight: inherit;
        }

        // Make entire card clickable via title link
        a {
          color: inherit;
          text-decoration: none;

          &::after {
            content: '';
            position: absolute;
            inset: 0;
          }
        }
      }

      .author {
        font-size: var(--type-size-caption);
        color: var(--global-text-color-light);
        margin: 2px 0;

        a {
          color: inherit;
          text-decoration: none;
          position: relative;
          z-index: 1;  // Above card link for clickable coauthors

          &:hover {
            color: var(--global-theme-color);
          }
        }

        >em {
          border-bottom: 1px solid;
          font-style: normal;
        }
      }

      .periodical {
        font-size: var(--type-size-caption);
        color: var(--global-text-color-lighter);
        font-style: italic;
        margin-top: 2px;
      }

      em.star {
        border-bottom: none;
        color: var(--global-theme-color);
        font-style: normal;
      }

      .links {
        margin-top: var(--space-mu);
        font-size: var(--type-size-caption);
        position: relative;
        z-index: 1;  // Above card link for clickable utility links

        a {
          margin-right: 0.4em;
          color: var(--global-text-color-light);
          cursor: pointer;

          &:hover {
            text-decoration: underline;
          }
        }
      }
    }
  }
}

// Collapsible Abstract/Bib
.publications .bibliography .publication-row {
  .abstract p {
    line-height: 1.4em;
    margin: 0.8em;
    font-size: 0.85rem;
    text-align: justify;
  }

  .bib pre {
    line-height: 1.4em;
    margin: 0.8em;
    font-size: 0.7rem;
    text-align: justify;
  }

  .abstract.hidden,
  .bib.hidden {
    max-height: 0;
    transition: all 0.5s ease-out;
    overflow: hidden;
    border-radius: 1rem;
    background-color: var(--global-hover-bg-color);
  }

  .abstract.hidden.open,
  .bib.hidden.open {
    max-height: 100em;
    transition-delay: 0.3s;
    transition: all 1s ease-in;
    padding: 0.3rem 0.6rem;
    margin-top: 0.3rem;
  }
}
