const CACHE_NAME="yoonholee-v1",urlsToCache=["/","/assets/css/main.css","/assets/js/common.js","/assets/img/prof_pic.jpg"];self.addEventListener("install",e=>{e.waitUntil(caches.open(CACHE_NAME).then(e=>(console.log("Opened cache"),e.addAll(urlsToCache))).catch(e=>{console.error("Cache installation failed:",e)})),self.skipWaiting()}),self.addEventListener("activate",e=>(e.waitUntil(caches.keys().then(e=>Promise.all(e.map(e=>{if(e!==CACHE_NAME)return console.log("Deleting old cache:",e),caches.delete(e)})))),self.clients.claim())),self.addEventListener("fetch",e=>{e.request.url.startsWith(self.location.origin)&&e.respondWith(caches.match(e.request).then(t=>{if(t)return t;const s=e.request.clone();return fetch(s).then(t=>{if(!t||200!==t.status||"basic"!==t.type)return t;const s=t.clone();return"GET"===e.request.method&&caches.open(CACHE_NAME).then(t=>{t.put(e.request,s)}),t}).catch(e=>(console.error("Fetch failed:",e),caches.match("/404.html")))}))});